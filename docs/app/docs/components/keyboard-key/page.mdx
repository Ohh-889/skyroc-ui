# KeyboardKey 键盘按键

键盘按键组件用于显示键盘快捷键、组合键等,提供美观的视觉效果和跨平台的符号适配。

## 导入

```ts copy
import { KeyboardKey, KeyboardKeyGroup } from 'skyroc-ui';
```

## 基础用法

### 组合键

显示键盘快捷键组合,支持数组形式的多个按键。

<Demo src="@playground/keyboard-key/modules/KeyboardKeyDemo" title="组合键" />

### 键组

使用 `KeyboardKeyGroup` 组件批量显示多个按键,支持自定义分隔符。

<Demo src="@playground/keyboard-key/modules/KeyboardKeyGroup" title="键组" />

### 变体

提供三种视觉样式:`solid`、`outline`、`ghost`。

<Demo src="@playground/keyboard-key/modules/KeyboardKeyVariants" title="变体" />

### 尺寸

KeyboardKey 提供 6 种尺寸:`xs`、`sm`、`md`、`lg`、`xl`、`2xl`。

<Demo src="@playground/keyboard-key/modules/KeyboardKeySize" title="尺寸" />

## API

### KeyboardKey Props

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| value | `KeyboardKeyValue \| KeyboardKeyValue[]` | - | 按键值,支持单个按键或按键数组 |
| variant | `'solid' \| 'outline' \| 'ghost'` | `'outline'` | 变体样式 |
| size | `'xs' \| 'sm' \| 'md' \| 'lg' \| 'xl' \| '2xl'` | `'md'` | 按键尺寸 |
| className | `string` | - | 自定义类名 |
| children | `(values: string[]) => ReactNode` | - | 自定义渲染函数,接收解析后的按键值数组 |

> 支持原生 `div` 元素的其他所有属性。

#### KeyboardKeyValue

按键值可以是内置的键名或任意字符串:

```ts
type KeyboardKeyValue = BuiltinKeyboardKey | (string & {});
```

#### BuiltinKeyboardKey

内置支持的键名,会自动转换为对应的符号:

| 键名 | 符号 | 说明 |
|------|------|------|
| `command` | `⌘` | Command 键(macOS) |
| `meta` | `⌘` / `⊞` | Meta 键(根据操作系统显示) |
| `ctrl` | `⌃` / `ctrl` | Control 键(根据操作系统显示) |
| `alt` | `⌥` / `alt` | Alt/Option 键(根据操作系统显示) |
| `option` | `⌥` | Option 键(macOS) |
| `shift` | `⇧` | Shift 键 |
| `enter` | `↵` | Enter 键 |
| `escape` | `⎋` | Escape 键 |
| `backspace` | `⌫` | Backspace 键 |
| `delete` | `⌦` | Delete 键 |
| `tab` | `⇥` | Tab 键 |
| `capslock` | `⇪` | Caps Lock 键 |
| `arrowup` | `↑` | 向上箭头 |
| `arrowdown` | `↓` | 向下箭头 |
| `arrowleft` | `←` | 向左箭头 |
| `arrowright` | `→` | 向右箭头 |
| `pageup` | `⇞` | Page Up 键 |
| `pagedown` | `⇟` | Page Down 键 |
| `home` | `↖` | Home 键 |
| `end` | `↘` | End 键 |
| `win` | `⊞` | Windows 键 |

其他任意字符串会自动转换为大写显示。

### KeyboardKeyGroup Props

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| values | `KeyboardKeyValue[]` | - | 按键值数组(必填) |
| separator | `ReactNode` | `'+'` | 按键之间的分隔符 |
| variant | `'solid' \| 'outline' \| 'ghost'` | `'outline'` | 变体样式 |
| size | `'xs' \| 'sm' \| 'md' \| 'lg' \| 'xl' \| '2xl'` | `'md'` | 按键尺寸 |
| className | `string` | - | 组容器的自定义类名 |
| classNames | `KeyboardKeyClassNames` | - | 自定义各部分的样式类名 |
| render | `(value: KeyboardKeyValue) => ReactNode` | - | 自定义单个按键的渲染函数 |

> 支持原生 `div` 元素的其他所有属性。

### KeyboardKeyClassNames

| 属性 | 类型 | 说明 |
|------|------|------|
| group | `string` | 组容器样式 |
| item | `string` | 单个按键样式 |
| separator | `string` | 分隔符样式 |

## Hooks

### useKeyboardKey

用于获取按键显示值的 Hook,会根据操作系统自动适配。

```tsx
import { useKeyboardKey } from 'skyroc-ui';

function MyComponent() {
  const { getKeyboardKey, isMacOS } = useKeyboardKey();

  const commandKey = getKeyboardKey('command'); // macOS: ⌘, Windows: ⊞

  return <div>{commandKey}</div>;
}
```

**返回值:**

| 属性 | 类型 | 说明 |
|------|------|------|
| getKeyboardKey | `(value?: string) => string` | 获取按键的显示值 |
| isMacOS | `boolean` | 是否为 macOS 系统 |

## 尺寸对照

| 尺寸 | 高度 | 最小宽度 | 文本大小 | 组间距 |
|------|------|---------|---------|-------|
| xs | 16px (`h-4`) | 16px (`min-w-4`) | `text-3xs` | `gap-0.75` |
| sm | 18px (`h-4.5`) | 18px (`min-w-4.5`) | `text-2xs` | `gap-1` |
| md | 20px (`h-5`) | 20px (`min-w-5`) | `text-xs` | `gap-1.25` |
| lg | 24px (`h-6`) | 24px (`min-w-6`) | `text-sm` | `gap-1.5` |
| xl | 28px (`h-7`) | 28px (`min-w-7`) | `text-base` | `gap-1.75` |
| 2xl | 32px (`h-8`) | 32px (`min-w-8`) | `text-lg` | `gap-2` |

## 使用指南

### 何时使用

- 显示键盘快捷键提示
- 文档中说明操作方式
- 应用设置中的快捷键配置
- 命令面板中的快捷键显示
- 教程和帮助文档

### 平台适配

组件会自动检测操作系统并显示相应的按键符号:
- **macOS**: `command` → `⌘`, `option` → `⌥`, `ctrl` → `⌃`
- **Windows/Linux**: `meta` → `⊞`, `alt` → `alt`, `ctrl` → `ctrl`

### 变体使用建议

- **solid** - 强调显示、主要快捷键
- **outline** - 默认样式,适合大多数场景
- **ghost** - 次要快捷键、不太重要的提示

### 尺寸使用建议

- **xs/sm** - 内联文本、紧凑布局
- **md** - 默认尺寸,适合大多数场景
- **lg/xl** - 突出显示、教程说明
- **2xl** - 大屏展示、营销页面

## 注意事项

1. **跨平台适配** - 组件会自动根据操作系统显示合适的按键符号
2. **大小写处理** - 非内置键名会自动转换为大写显示
3. **数组格式** - `value` 支持字符串或字符串数组
4. **分隔符自定义** - `KeyboardKeyGroup` 的分隔符可以是任意 React 节点
5. **客户端渲染** - 由于需要检测操作系统,组件使用了客户端渲染

## 无障碍

- 使用语义化的 HTML 结构
- 提供适当的视觉对比度
- 支持键盘聚焦和焦点环
- 建议为复杂的快捷键组合提供文字说明

## 最佳实践

### 单个按键

```tsx
<KeyboardKey value="enter" />
```

### 快捷键组合

```tsx
<KeyboardKey value={['command', 'k']} />
```

### 多个快捷键

```tsx
<KeyboardKeyGroup
  values={['command', 'shift', 'p']}
  variant="solid"
/>
```

### 自定义分隔符

```tsx
<KeyboardKeyGroup
  values={['ctrl', 'alt', 'delete']}
  separator=" + "
/>

<KeyboardKeyGroup
  values={['command', 'k']}
  separator={<span className="mx-1">then</span>}
/>
```

### 自定义渲染

```tsx
<KeyboardKey value="command">
  {(values) => (
    <span className="font-bold">{values.join(' + ')}</span>
  )}
</KeyboardKey>
```

### 内联文本使用

```tsx
<p>
  按下 <KeyboardKey value="command" size="sm" variant="ghost" /> + <KeyboardKey value="k" size="sm" variant="ghost" /> 打开命令面板
</p>
```

### 自定义样式

```tsx
<KeyboardKeyGroup
  values={['command', 'shift', 'p']}
  classNames={{
    group: 'gap-3',
    item: 'bg-primary text-primary-foreground',
    separator: 'text-primary'
  }}
/>
```

### 帮助提示

```tsx
<div className="flex items-center gap-2">
  <span>搜索</span>
  <KeyboardKeyGroup
    values={['command', 'k']}
    size="sm"
    variant="outline"
  />
</div>
```

### 命令列表

```tsx
const shortcuts = [
  { name: '打开命令面板', keys: ['command', 'k'] },
  { name: '保存文件', keys: ['command', 's'] },
  { name: '查找', keys: ['command', 'f'] },
];

return (
  <div className="space-y-2">
    {shortcuts.map((shortcut) => (
      <div key={shortcut.name} className="flex items-center justify-between">
        <span>{shortcut.name}</span>
        <KeyboardKeyGroup values={shortcut.keys} size="sm" />
      </div>
    ))}
  </div>
);
```

### 跨平台显示

```tsx
import { useKeyboardKey } from 'skyroc-ui';

function ShortcutHint() {
  const { isMacOS } = useKeyboardKey();

  return (
    <div>
      <p>使用快捷键:</p>
      <KeyboardKeyGroup
        values={isMacOS ? ['command', 'k'] : ['ctrl', 'k']}
      />
    </div>
  );
}
```
