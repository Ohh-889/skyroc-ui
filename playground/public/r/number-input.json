{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "number-input",
  "type": "registry:block",
  "title": "Number Input",
  "registryDependencies": ["https://ui-play.skyroc.me/r/style.json"],
  "files": [
    {
      "path": "src/components/number-input/NumberInput.tsx",
      "content": "'use client';\n\nimport { forwardRef } from 'react';\nimport { useComponentConfig } from '../config-provider/context';\nimport NumberInputUI from './NumberInputUI';\nimport type { NumberInputProps } from './types';\n\nconst NumberInput = forwardRef<HTMLInputElement, NumberInputProps>((props, ref) => {\n  const config = useComponentConfig('numberInput');\n\n  const mergedProps = {\n    ...config,\n    ...props\n  };\n\n  return (\n    <NumberInputUI\n      {...mergedProps}\n      ref={ref}\n    />\n  );\n});\n\nNumberInput.displayName = 'NumberInput';\n\nexport default NumberInput;\n",
      "type": "registry:ui",
      "target": "components/number-input/NumberInput.tsx"
    },
    {
      "path": "src/components/number-input/NumberInputControl.tsx",
      "content": "import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\nimport { numberInputVariants } from './number-input-variants';\nimport type { NumberInputControlProps } from './types';\n\nconst NumberInputControl = forwardRef<HTMLInputElement, NumberInputControlProps>((props, ref) => {\n  const { className, size, min, max, disabled, readOnly, center, ...rest } = props;\n\n  const { control } = numberInputVariants({ size, center });\n\n  const mergedCls = cn(control(), className);\n\n  return (\n    <input\n      aria-roledescription=\"Number Input\"\n      aria-valuemax={Number(max)}\n      aria-valuemin={Number(min)}\n      autoComplete=\"off\"\n      autoCorrect=\"off\"\n      className={mergedCls}\n      data-disabled={disabled ? '' : undefined}\n      data-readonly={readOnly ? '' : undefined}\n      data-size={size}\n      data-slot=\"number-input-control\"\n      disabled={disabled}\n      inputMode=\"numeric\"\n      max={max}\n      min={min}\n      readOnly={readOnly}\n      ref={ref}\n      role=\"spinbutton\"\n      spellCheck=\"false\"\n      type=\"text\"\n      {...rest}\n    />\n  );\n});\n\nNumberInputControl.displayName = 'NumberInputControl';\n\nexport default NumberInputControl;\n",
      "type": "registry:ui",
      "target": "components/number-input/NumberInputControl.tsx"
    },
    {
      "path": "src/components/number-input/NumberInputUI.tsx",
      "content": "'use client';\n\nimport { forwardRef, useRef } from 'react';\nimport { Minus, Plus, X } from 'lucide-react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { cn } from '@/lib/utils';\nimport { numberInputVariants } from './number-input-variants';\nimport NumberInputControl from './NumberInputControl';\nimport type { NumberInputProps } from './types';\n\nconst NumberInputUI = forwardRef<HTMLInputElement, NumberInputProps>((props, ref) => {\n  const {\n    className,\n    classNames,\n    size,\n    center,\n    clearable,\n    disabled,\n    readOnly,\n    min,\n    max,\n    step = 1,\n    value: valueProp,\n    defaultValue,\n    onChange,\n    onValueChange,\n    leading,\n    trailing,\n    decrementIcon,\n    incrementIcon,\n    controlProps,\n    ...rest\n  } = props;\n\n  const { clearable: clearableCls, root, decrement, increment }\n    = numberInputVariants({ size, center });\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const composedRefs = useComposedRefs(inputRef, ref);\n\n  const [value, setValue] = useControllableState({\n    caller: 'number-input',\n    defaultProp: defaultValue,\n    prop: valueProp,\n    onChange: onValueChange\n  });\n\n  const displayValue = value === undefined ? '' : String(value);\n\n  // ---------------------------\n  // Tools\n  // ---------------------------\n\n  const parse = (v: string): number | undefined => {\n    if (v === '' || v === '-')\n      return undefined;\n    const n = Number(v);\n    return Number.isNaN(n) ? undefined : n;\n  };\n\n  const clamp = (n: number) => {\n    let x = n;\n    if (min !== undefined)\n      x = Math.max(x, min);\n    if (max !== undefined)\n      x = Math.min(x, max);\n    return x;\n  };\n\n  const updateValue = (n: number | undefined) => {\n    if (n === undefined) {\n      setValue(undefined);\n    }\n    else {\n      setValue(clamp(n));\n    }\n  };\n\n  // ---------------------------\n  // Common reusable boolean flags\n  // ---------------------------\n\n  const numericValue = parse(displayValue);\n\n  const isInteractable = !disabled && !readOnly;\n  const hasValue = numericValue !== undefined;\n  const hasMin = min !== undefined && hasValue;\n  const hasMax = max !== undefined && hasValue;\n\n  const isDecrementDisabled\n    = !isInteractable || (hasMin && numericValue! <= min!);\n\n  const isIncrementDisabled\n    = !isInteractable || (hasMax && numericValue! >= max!);\n\n  // ---------------------------\n  // Events\n  // ---------------------------\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const raw = e.target.value;\n\n    if (raw === '' || raw === '-' || /^-?\\d*(?:\\.\\d*)?$/.test(raw)) {\n      updateValue(parse(raw));\n      onChange?.(e);\n    }\n  };\n\n  const handleBlur = () => {\n    if (!hasValue)\n      return;\n    updateValue(numericValue);\n  };\n\n  const stepChange = (amount: number) => {\n    if (!isInteractable)\n      return;\n    const current = numericValue ?? 0;\n    updateValue(current + amount);\n  };\n\n  const handleIncrement = () => stepChange(step);\n  const handleDecrement = () => stepChange(-step);\n\n  const handleClear = () => {\n    if (!isInteractable)\n      return;\n    updateValue(undefined);\n    inputRef.current?.focus();\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (!isInteractable)\n      return;\n\n    if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      handleIncrement();\n    }\n    else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      handleDecrement();\n    }\n    else if (e.key === 'Escape') {\n      inputRef.current?.blur();\n    }\n  };\n\n  // ---------------------------\n  // Classes\n  // ---------------------------\n\n  const mergedCls = cn(root(), className || classNames?.root);\n  const mergedClearableCls = cn(clearableCls(), classNames?.clearable);\n  const mergedDecrementCls = cn(decrement(), classNames?.decrement);\n  const mergedIncrementCls = cn(increment(), classNames?.increment);\n\n  return (\n    <div\n      className={mergedCls}\n      data-disabled={disabled ? '' : undefined}\n      data-readonly={readOnly ? '' : undefined}\n      data-slot=\"number-input-root\"\n      role=\"group\"\n    >\n      {leading}\n\n      {/* Input */}\n      <NumberInputControl\n        {...rest}\n        {...controlProps}\n        center={center}\n        className={classNames?.control}\n        disabled={disabled}\n        readOnly={readOnly}\n        ref={composedRefs}\n        size={size}\n        value={displayValue}\n        onBlur={handleBlur}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyDown}\n      />\n\n      {/* Clear */}\n      {clearable && displayValue !== '' && isInteractable\n        ? (\n          <X\n            className={mergedClearableCls}\n            onClick={handleClear}\n          />\n        )\n        : null}\n\n      {trailing}\n\n      {/* Decrement */}\n      <button\n        aria-label=\"Decrement\"\n        className={mergedDecrementCls}\n        data-disabled={isDecrementDisabled ? '' : undefined}\n        data-slot=\"number-input-decrement\"\n        disabled={isDecrementDisabled}\n        tabIndex={-1}\n        type=\"button\"\n        onClick={handleDecrement}\n      >\n        {decrementIcon || <Minus />}\n      </button>\n\n      {/* Increment */}\n      <button\n        aria-label=\"Increment\"\n        className={mergedIncrementCls}\n        data-disabled={isIncrementDisabled ? '' : undefined}\n        data-slot=\"number-input-increment\"\n        disabled={isIncrementDisabled}\n        tabIndex={-1}\n        type=\"button\"\n        onClick={handleIncrement}\n      >\n        {incrementIcon || <Plus />}\n      </button>\n    </div>\n  );\n});\n\nNumberInputUI.displayName = 'NumberInputUI';\nexport default NumberInputUI;\n",
      "type": "registry:ui",
      "target": "components/number-input/NumberInputUI.tsx"
    },
    {
      "path": "src/components/number-input/index.ts",
      "content": "export { default as NumberInput } from './NumberInput';\n\nexport * from './types';\n",
      "type": "registry:ui",
      "target": "components/number-input/index.ts"
    },
    {
      "path": "src/components/number-input/number-input-variants.ts",
      "content": "import { tv } from 'tailwind-variants';\n\nexport const numberInputVariants = tv({\n  slots: {\n    root: [\n      `group flex items-center w-full rounded-md border border-solid border-input bg-background`,\n      `focus-within:border-input focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-background focus-within:ring-primary`,\n      `disabled:cursor-not-allowed disabled:opacity-50`\n    ],\n    decrement: [\n      `flex shrink-0 items-center justify-center text-muted-foreground bg-transparent outline-none cursor-pointer`,\n      `hover:text-foreground`,\n      `disabled:cursor-not-allowed disabled:opacity-20`\n    ],\n    increment: [\n      `flex shrink-0 items-center justify-center text-muted-foreground bg-transparent outline-none cursor-pointer`,\n      `hover:text-foreground`,\n      `disabled:cursor-not-allowed disabled:opacity-20`\n    ],\n    control: [\n      `h-full w-full grow bg-transparent outline-none`,\n      `placeholder:text-muted-foreground`,\n      `disabled:cursor-not-allowed disabled:opacity-50`\n    ],\n    clearable: `hidden group-hover:block size-1em cursor-pointer opacity-50 hover:opacity-100`\n  },\n  variants: {\n    size: {\n      'xs': {\n        root: 'h-6 px-1.5 text-2xs gap-1',\n        decrement: 'p-0.75',\n        increment: 'p-0.75'\n      },\n      'sm': {\n        root: 'h-7 px-2 text-xs gap-1.5',\n        decrement: 'p-1',\n        increment: 'p-1'\n      },\n      'md': {\n        root: 'h-8 px-2.5 text-sm gap-2',\n        decrement: 'p-1.25',\n        increment: 'p-1.25'\n      },\n      'lg': {\n        root: 'h-9 px-3 text-base gap-2.5',\n        decrement: 'p-1.5',\n        increment: 'p-1.5'\n      },\n      'xl': {\n        root: 'h-10 px-3.5 text-lg gap-3',\n        decrement: 'p-1.75',\n        increment: 'p-1.75'\n      },\n      '2xl': {\n        root: 'h-12 px-4 text-xl gap-3.5',\n        decrement: 'p-2',\n        increment: 'p-2'\n      }\n    },\n    center: {\n      true: {\n        decrement: '-order-1',\n        control: 'text-center'\n      }\n    }\n  },\n  defaultVariants: {\n    size: 'md',\n    center: false\n  }\n});\n\nexport type NumberInputSlots = keyof ReturnType<typeof numberInputVariants>;\n",
      "type": "registry:ui",
      "target": "components/number-input/number-input-variants.ts"
    },
    {
      "path": "src/components/number-input/types.ts",
      "content": "import type { ComponentPropsWithoutRef } from 'react';\nimport type { SlotProps, ClassValue, StyledComponentProps } from '@/types/shared';\nimport type { NumberInputSlots } from './number-input-variants';\n\n/**\n * Class names for different slots in the number input component.\n * Allows customizing styles for the root, buttons, control, and clearable parts.\n */\nexport type NumberInputClassNames = Partial<Record<NumberInputSlots, ClassValue>>;\n\n/**\n * Props for the NumberInput control component.\n * The actual input element for numeric value entry.\n */\nexport interface NumberInputControlProps extends StyledComponentProps<Omit<ComponentPropsWithoutRef<'input'>, 'min' | 'max' | 'value' | 'defaultValue'>> {\n  /**\n   * Maximum allowed value.\n   */\n  max?: number;\n  /**\n   * Minimum allowed value.\n   */\n  min?: number;\n\n  /**\n   * Current numeric value.\n   */\n  value?: number | string;\n\n  /**\n   * Default value for uncontrolled mode.\n   */\n  defaultValue?: number | string;\n\n  /**\n   * Whether to center the input value with buttons on both sides.\n   * @default false\n   */\n  center?: boolean;\n}\n\n/**\n * Props for the main NumberInput component.\n * A numeric input with increment/decrement buttons.\n *\n * @example\n * ```tsx\n * // Basic number input\n * <NumberInput value={count} onChange={setCount} />\n *\n * // With min/max limits\n * <NumberInput min={0} max={100} step={5} />\n *\n * // Centered layout with buttons on both sides\n * <NumberInput center />\n *\n * // With clearable button\n * <NumberInput clearable />\n *\n * // Different sizes\n * <NumberInput size=\"lg\" />\n *\n * // Disabled state\n * <NumberInput disabled />\n * ```\n */\nexport interface NumberInputProps extends NumberInputControlProps, SlotProps {\n  classNames?: NumberInputClassNames;\n  /**\n   * Whether to center the input value with buttons on both sides.\n   * @default false\n   */\n  center?: boolean;\n  /**\n   * Whether to show the clearable button.\n   * @default false\n   */\n  clearable?: boolean;\n  /**\n   * Callback fired when the input value changes.\n   */\n  onValueChange?: (value: number | string | undefined) => void;\n  /**\n   * Step value for increment/decrement operations.\n   * @default 1\n   */\n  step?: number;\n  /**\n   * Custom decrement icon.\n   */\n  decrementIcon?: React.ReactNode;\n  /**\n   * Custom increment icon.\n   */\n  incrementIcon?: React.ReactNode;\n  /**\n   * Props for the input control.\n   */\n  controlProps?: Omit<NumberInputControlProps, 'value' | 'onChange'>;\n}\n",
      "type": "registry:ui",
      "target": "components/number-input/types.ts"
    }
  ]
}
